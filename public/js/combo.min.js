var app=angular.module("myApp",["myAppCtrl","ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(a,b){a.state("home",{url:"/",name:"home",templateUrl:"partial/home",controller:"itemController"}).state("view1",{url:"/view1",name:"view1",templateUrl:"partial/view1",controller:"view1Controller"}).state("view2",{url:"/view2",name:"view2",templateUrl:"partial/view2",controller:"view2Controller"}),b.otherwise("/")}]),angular.module("myAppCtrl",[]).controller("appController",["$scope",function(a){a.intro="Welcome to our Cart Page"}]).controller("itemController",["$scope","$state","$http",function(a,b,c){a.showConfirm=!1,a.showInvalid=!1,a.openItem=!0,a.cartItems=[],a.noCart=!0,a.purchased=!1,a.total=0,a.name="",a.email="",a.password="",a.toggle=function(){a.openItem=!a.openItem},a.findIndex=function(b,c){for(var d in a[c])if(a[c][d].id==b)return d;return-1},a.calculateTotal=function(){a.total=0,$.each(a.cartItems,function(b,c){a.total+=c.price*c.qty})},a.close=function(){a.showConfirm=!a.showConfirm,a.purchased&&(a.cartItems.length=0,a.openItem=!0,a.noCart=!0,a.purchased=!1,$.each(a.items,function(a,b){b.inCart=!1,b.qty=1}))},a.incItemQty=function(b){var c=a.findIndex(b,"cartItems");a.cartItems[c].qty+=1,a.calculateTotal()},a.decItemQty=function(b){var c=a.findIndex(b,"cartItems");a.cartItems[c].qty>1&&(a.cartItems[c].qty-=1),a.calculateTotal()},a.addToCart=function(b){var c=a.findIndex(b,"cartItems");-1==c?(c=a.findIndex(b,"items"),a.items[c].inCart=!0,a.cartItems.push(a.items[c]),a.noCart=!1):a.cartItems[c].qty+=1,a.calculateTotal()},a.removeFromCart=function(b){var c=a.findIndex(b,"items");a.items[c].inCart=!1,a.items[c].qty=1,c=a.findIndex(b,"cartItems"),a.cartItems.splice(c,1),0==a.cartItems.length&&(a.noCart=!0,a.openItem=!0),a.calculateTotal()},a.checkout=function(){a.showConfirm=!0},a.showMatchResult=function(){a.showInvalid=!1,a.purchased=!0},a.showNoMatchResult=function(){a.showInvalid=!0},a.submit=function(){c.get("../data/users.json").success(function(b){var c=-1;$.each(b.users,function(b,d){d.email===a.email&&d.password===a.password&&(c=b,a.name=d.name)}),-1!=c?a.showMatchResult():a.showNoMatchResult()}).error(function(){})},c.get("../data/items.json").success(function(b){a.items=b.items}).error(function(){}),console.log(b.current)}]).controller("view1Controller",["$scope",function(a){a.title="View 1 Section"}]).controller("view2Controller",["$scope",function(a){a.title="Brand New View 2 Section"}]);